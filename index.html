<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>HRA ‚Äì Material Handling</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- SEO Standard Description -->
  <meta name="description" content="High Risk Activity ‚Äì Material Handling in construction project areas. Safety guidelines, risk assessment HRA, top 5 highest risks, and risk matrix." />

  <!-- SEO & Social Media Sharing (Open Graph) -->
  <meta property="og:title" content="HRA ‚Äì Material Handling Risk Assessment" />
  <meta property="og:description" content="High Risk Activity ‚Äì Material Handling in construction project areas. safety guidelines, risk assessment HRA ‚Äì material handling, top 5 highest risks, risk matrix, and scope and assumptions." />
  <meta property="og:image" content="https://hra-virsim.pages.dev/img/material-handling.webp" />
  <meta property="og:url" content="https://hra-virsim.pages.dev" />
  <meta property="og:type" content="website" />
   
  <!-- Favicon -->
  <link rel="icon" href="https://hra-virsim.pages.dev/img/virsim_red.webp" type="image/webp" />

  <!-- PERFORMANCE FIX 1: LCP Preload -->
  <!-- Preload hero image dengan prioritas tinggi agar browser menemukannya segera (Fixes LCP Discovery) -->
  <link rel="preload" as="image" href="https://hra-virsim.pages.dev/img/material-handling.webp" fetchpriority="high" />

  <!-- PERFORMANCE FIX 2: Async Google Fonts -->
  <!-- Mencegah font memblokir render awal (Fixes Render Blocking) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"></noscript>

  <style>
    :root {
      --bg-main: #f4f5fb;
      --bg-card: #ffffff;
      --bg-soft: #f9fafc;
      /* FIXED: Darkened accent color for better contrast (WCAG AA Pass) */
      --accent: #3545cc; 
      --accent-soft: #e2e6ff;
      --accent-dark: #2a37a3;
      --text-main: #1f2933;
      --text-muted: #4b5563;
      --border-soft: #e2e8f0;
      --risk-low: #92d050;
      --risk-med: #fff066;
      --risk-high: #ff0066;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.09);
      --transition-fast: 0.2s ease;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #fdfbff 0, #f4f5fb 45%, #eef2ff 100%);
      color: var(--text-main);
      line-height: 1.5;
    }

    body.dark-theme {
      background: radial-gradient(circle at top left, #020617 0, #020617 40%, #0b1120 100%);
      --bg-main: #020617;
      --bg-card: #020617;
      --bg-soft: #020617;
      --accent: #6d28d9;
      --accent-soft: rgba(109, 40, 217, 0.25);
      --accent-dark: #e5e7ff;
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-soft: #1f2937;
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.9);
    }

    .page {
      max-width: 1200px;
      margin: 24px auto 32px;
      padding: 0 16px 32px;
    }

    /* HEADER */
    .header {
      background: linear-gradient(135deg, rgba(53, 69, 204, 0.95), rgba(109, 40, 217, 0.90)), 
                  url('https://hra-virsim.pages.dev/img/material-handling.webp');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: 24px;
      padding: 24px 28px;
      display: flex;
      align-items: center;
      gap: 18px;
      color: #f9fafb;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    body.dark-theme .header {
      background: linear-gradient(135deg, rgba(30, 58, 138, 0.92), rgba(88, 28, 135, 0.92)),
                  url('https://hra-virsim.pages.dev/img/material-handling.webp');
      background-size: cover;
      background-position: center;
      box-shadow: 0 26px 60px rgba(0, 0, 0, 1);
    }

    .header::before {
      content: "";
      position: absolute;
      width: 260px;
      height: 260px;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.25), transparent 70%);
      top: -80px;
      right: -80px;
      opacity: 0.6;
      pointer-events: none;
    }

    .logo-circle {
      flex-shrink: 0;
      width: 80px;
      height: 80px;
      border-radius: 999px;
      background: #ffffff;
      border: 4px solid rgba(255, 255, 255, 0.25);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      position: relative;
      z-index: 1;
      overflow: hidden;
    }

    .logo-img {
      width: 56px;
      height: 56px;
      object-fit: contain;
      display: block;
    }

    .header-main {
      position: relative;
      z-index: 1;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .header-title {
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: 0.02em;
      margin-bottom: 2px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .header-sub {
      font-size: 0.95rem;
      opacity: 0.95;
      margin-bottom: 4px;
      font-weight: 400;
    }

    .header-meta {
      font-size: 0.85rem;
      opacity: 0.9;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .header-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-top: 10px;
    }

    .tag-pill {
      background: rgba(15, 23, 42, 0.25);
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.75rem;
      backdrop-filter: blur(4px);
    }

    .download-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      border-radius: 999px;
      border: 1px solid rgba(248, 250, 252, 0.75);
      background: rgba(248, 250, 252, 0.95);
      color: #111827;
      font-size: 0.8rem;
      font-weight: 600;
      text-decoration: none;
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.2);
      transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.12s ease;
    }

    .download-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.3);
      background: #ffffff;
    }

    .header-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(248, 250, 252, 0.6);
      background: rgba(15, 23, 42, 0.15);
      color: #f9fafb;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
      backdrop-filter: blur(4px);
      transition: background var(--transition-fast), transform 0.12s ease;
    }

    .header-btn:hover {
      background: rgba(15, 23, 42, 0.3);
      transform: translateY(-1px);
      border-color: rgba(248, 250, 252, 0.9);
    }

    body.dark-theme .download-btn {
      background: rgba(15, 23, 42, 0.95);
      border-color: rgba(148, 163, 184, 0.5);
      color: #e5e7eb;
    }

    /* LAYOUT */
    .layout {
      display: grid;
      grid-template-columns: minmax(0, 260px) minmax(0, 1fr);
      gap: 18px;
      margin-top: 22px;
    }

    /* SIDENAV */
    .sidenav {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 20px;
      padding: 14px 14px 16px;
      box-shadow: 0 14px 32px rgba(148, 163, 184, 0.35);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 16px;
      align-self: flex-start;
      max-height: calc(100vh - 40px);
      overflow-y: auto;
    }

    body.dark-theme .sidenav {
      background: rgba(15, 23, 42, 0.92);
      box-shadow: 0 18px 40px rgba(0,0,0,0.9);
      border: 1px solid rgba(30,64,175,0.7);
    }

    .sidenav-header-group {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-bottom: 6px;
      border-bottom: 1px dashed var(--border-soft);
      margin-bottom: 8px;
      cursor: default;
    }

    .sidenav-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-muted);
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .sidenav-toggle-icon {
      display: none;
      font-size: 0.9rem;
      color: var(--accent);
      transition: transform 0.2s ease;
    }

    .nav-list {
      list-style: none;
      margin-top: 4px;
    }

    .nav-item { margin-bottom: 4px; }

    .nav-link {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 7px 10px;
      border-radius: 12px;
      font-size: 0.85rem;
      color: var(--text-muted);
      text-decoration: none;
      transition: background var(--transition-fast), color var(--transition-fast), transform 0.12s ease;
      cursor: pointer;
    }

    .nav-link span.index {
      width: 32px;
      height: 22px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      background: var(--accent-soft);
      color: var(--accent-dark);
      flex-shrink: 0;
    }

    .nav-link:hover {
      background: #eef2ff;
      color: var(--accent-dark);
      transform: translateX(1px);
    }

    .nav-link.active {
      background: var(--accent);
      color: #eef2ff;
      box-shadow: 0 14px 28px rgba(84, 101, 255, 0.35);
    }
    .nav-link.active span.index {
      background: rgba(248, 250, 252, 0.15);
      color: #fefce8;
    }

    .nav-sublist {
      list-style: none;
      margin: 4px 0 6px 30px;
      border-left: 1px dashed var(--border-soft);
      padding-left: 8px;
    }
    .nav-sublink {
      display: block;
      padding: 3px 4px;
      font-size: 0.8rem;
      color: var(--text-muted);
      text-decoration: none;
      border-radius: 8px;
      margin-bottom: 3px;
      transition: background var(--transition-fast), color var(--transition-fast);
      cursor: pointer;
    }
    .nav-sublink:hover {
      background: var(--accent-soft);
      color: var(--accent-dark);
    }

    /* RESPONSIVE MOBILE FIX - CENTERED LAYOUT */
    @media (max-width: 880px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
      .header {
        flex-direction: column;
        align-items: center; /* CENTER ITEMS */
        text-align: center; /* CENTER TEXT */
        padding: 24px 20px;
      }
       
      .logo-circle {
        margin-bottom: 12px; /* Spacing below logo */
      }

      .header-main {
        width: 100%;
        align-items: center; /* Center flex children */
      }

      .header-row-top {
        align-items: center; /* Center title block */
      }

      .header-meta {
        justify-content: center; /* Center pills */
      }

      .header-actions {
        width: 100%;
        justify-content: center; /* Center buttons */
      }

      /* SIDENAV MOBILE */
      .sidenav {
        position: relative;
        top: 0;
        max-height: none;
        overflow: visible;
        margin-bottom: 10px;
      }
       
      .sidenav-header-group {
        cursor: pointer;
        margin-bottom: 0;
        border-bottom: none;
      }

      .nav-list {
        display: none;
        margin-top: 12px;
        padding-top: 8px;
        border-top: 1px dashed var(--border-soft);
      }

      .sidenav-toggle-icon {
        display: block; 
      }

      .sidenav.open .nav-list {
        display: block;
        animation: fadeIn 0.2s ease;
      }

      .sidenav.open .sidenav-toggle-icon {
        transform: rotate(180deg);
      }
       
      .sidenav.open .sidenav-header-group {
         border-bottom: 1px dashed var(--border-soft);
         padding-bottom: 8px;
      }
    }
     
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }


    /* MAIN CONTENT */
    .content {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    section {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 16px 18px 18px;
      box-shadow: 0 16px 38px rgba(148, 163, 184, 0.45);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    body.dark-theme section {
      box-shadow: 0 18px 40px rgba(0,0,0,0.95);
      border-color: rgba(30,64,175,0.6);
    }

    section h2 {
      font-size: 1.05rem;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    section h2 span.badge {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent-dark);
      background: var(--accent-soft);
      padding: 3px 9px;
      border-radius: 999px;
    }

    section p {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 2px;
      margin-bottom: 6px;
    }

    .pill {
      font-size: 0.8rem;
      padding: 4px 8px;
      border-radius: 999px;
      background: var(--bg-soft);
      border: 1px dashed var(--border-soft);
      color: var(--text-muted);
    }

    /* RISK SUMMARY DASHBOARD */
    .summary-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }

    .summary-card {
      border-radius: var(--radius-md);
      padding: 10px 12px;
      border: 1px solid var(--border-soft);
      background: var(--bg-soft);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .summary-card-label {
      font-size: 0.8rem;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .summary-card-value {
      font-size: 1.3rem;
      font-weight: 600;
      display: flex;
      align-items: baseline;
      gap: 6px;
    }

    .summary-pill {
      font-size: 0.72rem;
      padding: 2px 7px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.04);
    }

    .summary-dot {
      width: 11px;
      height: 11px;
      border-radius: 999px;
    }

    .summary-dot.low { background: var(--risk-low); }
    .summary-dot.med { background: var(--risk-med); }
    .summary-dot.high { background: var(--risk-high); }

    .top-risk-list {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .top-risk-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .top-risk-title {
      font-size: 0.88rem;
      font-weight: 600;
    }

    .top-risk-filter {
      display: flex;
      gap: 4px;
      flex-wrap: wrap;
    }

    .filter-chip {
      border-radius: 999px;
      padding: 3px 8px;
      font-size: 0.74rem;
      border: 1px solid var(--border-soft);
      background: #ffffff;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.2s;
    }

    .filter-chip:hover {
      background: #eef2ff;
      color: var(--accent-dark);
    }

    .filter-chip.active {
      background: var(--accent);
      color: #f9fafb;
      border-color: transparent;
    }

    body.dark-theme .filter-chip { background: #020617; }
     
    .risk-card {
      border-radius: var(--radius-md);
      padding: 8px 9px;
      display: grid;
      grid-template-columns: auto minmax(0, 1fr) auto;
      gap: 8px;
      align-items: center;
      cursor: pointer;
      border: 1px solid var(--border-soft);
      background: #ffffff;
      transition: transform 0.1s;
    }

    body.dark-theme .risk-card { background: #020617; }
    .risk-card:hover { transform: translateY(-1px); border-color: var(--accent); }

    .risk-card-main { display: flex; flex-direction: column; gap: 2px; }
    .risk-card-code { font-size: 0.78rem; color: var(--text-muted); }
    .risk-card-title { font-size: 0.86rem; font-weight: 600; }
    .risk-card-section { font-size: 0.76rem; color: var(--text-muted); }

    .risk-score-badge {
      border-radius: 999px;
      padding: 4px 9px;
      font-size: 0.78rem;
      font-weight: 600;
      background: rgba(15, 23, 42, 0.04);
      display: flex;
      gap: 4px;
    }

    .risk-card.level-high { border-left: 4px solid var(--risk-high); }
    .risk-card.level-med { border-left: 4px solid var(--risk-med); }
    .risk-card.level-low { border-left: 4px solid var(--risk-low); }

    .risk-level-chip {
      font-size: 0.72rem;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(15, 23, 42, 0.06);
    }
    .risk-level-chip.high { background: rgba(255, 0, 102, 0.07); }
    .risk-level-chip.med { background: rgba(255, 240, 102, 0.2); }
    .risk-level-chip.low { background: rgba(146, 208, 80, 0.15); }

    /* Risk Matrix Table */
    .risk-matrix-wrapper {
      margin-top: 6px;
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 12px;
    }
    @media (max-width: 880px) { .risk-matrix-wrapper { grid-template-columns: 1fr; } }
     
    .risk-table-container {
      overflow-x: auto;
      border-radius: var(--radius-md);
      border: 1px solid var(--border-soft);
      background: var(--bg-soft);
    }
     
    table.risk-matrix {
      width: 100%;
      border-collapse: collapse;
      min-width: 360px;
      font-size: 0.82rem;
    }
    .risk-matrix th, .risk-matrix td {
      border: 1px solid var(--border-soft);
      text-align: center;
      padding: 6px 8px;
      color: #000000; /* BLACK TEXT FOR MATRIX CELLS */
    }
    .risk-matrix th { background: #e5e7f6; color: #4b5563; font-weight: 600; }
    body.dark-theme .risk-matrix th { background: #020617; color: #e5e7eb; }
    
    /* FIXED: Likelihood labels white in dark mode */
    body.dark-theme .risk-matrix td.label { color: #e5e7eb; font-weight: 600; }
     
    /* BACKGROUNDS FOR RISK CELLS */
    .risk-low { background: var(--risk-low); }
    .risk-med { background: var(--risk-med); }
    .risk-high { background: var(--risk-high); }

    /* Risk Calculator */
    .risk-calc {
      margin-top: 6px;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 12px;
    }
    @media (max-width: 880px) { .risk-calc { grid-template-columns: 1fr; } }

    .risk-calc-form {
      border-radius: var(--radius-md);
      padding: 10px 12px;
      border: 1px solid var(--border-soft);
      background: var(--bg-soft);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
     
    .risk-calc-field label { font-size: 0.85rem; font-weight: 600; display:block; margin-bottom:4px;}
    .risk-calc-field select {
      width: 100%;
      border-radius: 8px;
      border: 1px solid var(--border-soft);
      padding: 6px;
      font-size: 0.85rem;
      background: #ffffff;
    }
    body.dark-theme .risk-calc-field select { background: #020617; color: #e5e7eb; }

    #btnCalc {
      padding: 6px 14px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #fff;
      font-size: 0.85rem;
      cursor: pointer;
      margin-top: 4px;
    }

    .risk-calc-result {
      border-radius: var(--radius-lg);
      padding: 12px 14px;
      border: 1px solid var(--border-soft);
      background: var(--bg-soft);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .risk-calc-result[data-level="low"] { background: linear-gradient(135deg, rgba(146,208,80,0.2), var(--bg-soft)); border-color: rgba(146,208,80,0.9); }
    .risk-calc-result[data-level="med"] { background: linear-gradient(135deg, rgba(255,240,102,0.28), var(--bg-soft)); border-color: rgba(255,240,102,0.9); }
    .risk-calc-result[data-level="high"] { background: linear-gradient(135deg, rgba(255,0,102,0.25), var(--bg-soft)); border-color: rgba(255,0,102,0.9); }

    .risk-calc-score { font-size: 1.6rem; font-weight: 700; }
    .risk-calc-level { font-size: 0.9rem; font-weight: 600; }

    /* ACCORDION */
    .accordion { margin-top: 4px; display: flex; flex-direction: column; gap: 10px; }
    .acc-item {
      border-radius: var(--radius-md);
      border: 1px solid var(--border-soft);
      background: #fbfcff;
      overflow: hidden;
    }
    body.dark-theme .acc-item { background: #020617; }
    .acc-header {
      padding: 9px 11px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
    }
    .acc-title-main { font-size: 0.9rem; font-weight: 600; }
    .acc-title-sub { font-size: 0.8rem; color: var(--text-muted); }
    .acc-icon {
      width: 22px; height: 22px; border-radius: 999px; background: var(--accent-soft);
      color: var(--accent-dark); display: flex; align-items: center; justify-content: center;
      transition: transform 0.2s;
    }
    .acc-item.open .acc-icon { transform: rotate(90deg); background: var(--accent); color: #fff; }
    .acc-body {
      max-height: 0; overflow: hidden; padding: 0 11px;
      transition: max-height 0.2s ease, padding 0.2s ease;
    }
    .acc-item.open .acc-body { padding-bottom: 10px; }
    .acc-body p { margin-top: 6px; font-size: 0.86rem; }
    .acc-body ul { margin-top: 4px; padding-left: 16px; font-size: 0.84rem; color: var(--text-muted); }

    /* STEPS */
    .steps { margin-top: 4px; display: grid; gap: 10px; }
    .step {
      display: grid; grid-template-columns: auto 1fr; gap: 10px;
      padding: 8px 10px; border-radius: var(--radius-md);
      background: var(--bg-soft); border: 1px solid var(--border-soft);
    }
    .step-index {
      width: 22px; height: 22px; border-radius: 999px; background: var(--accent-soft);
      color: var(--accent-dark); display: flex; align-items: center; justify-content: center;
      font-size: 0.8rem; font-weight: 600;
    }
    .step-content-title { font-size: 0.88rem; font-weight: 600; margin-bottom: 2px; }
    .step-content-text { font-size: 0.84rem; color: var(--text-muted); }

    /* FOOTER */
    .footer {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px dashed var(--border-soft);
      text-align: center;
      color: var(--text-muted);
      font-size: 0.85rem;
    }

    .footer a {
      color: var(--accent);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s;
    }
    .footer a:hover {
      text-decoration: underline;
      color: var(--accent-dark);
    }
    .footer-sub {
      font-size: 0.75rem;
      opacity: 0.8;
      margin-top: 4px;
    }

    /* UTILS */
    .muted { color: var(--text-muted); font-size: 0.82rem; }
    .mb-4 { margin-bottom: 4px; }
    .mb-6 { margin-bottom: 6px; }
    html { scroll-behavior: smooth; }

    @media print {
      .header { background: #fff !important; color: #000 !important; border: 1px solid #ccc; box-shadow: none; }
      .header::before { display: none; }
      .header-actions, .sidenav, .footer { display: none !important; }
      .page { margin: 0; padding: 20px; }
    }
  </style>
</head>
<body>
<div class="page">
  <!-- HEADER -->
  <header class="header">
    <div class="logo-circle">
      <!-- FIXED: Added width and height attributes for CLS optimization -->
      <img src="https://hra-virsim.pages.dev/img/virsim_red.webp" alt="VIRSIM Logo" class="logo-img" width="56" height="56" />
    </div>
    <div class="header-main">
      <div class="header-row-top">
        <div class="header-title" data-i18n="headerTitle">HRA ‚Äì Material Handling</div>
        <div class="header-sub" data-i18n="headerSub">High Risk Activity ‚Äì Material Handling di Area Proyek Konstruksi</div>
        <div class="header-meta">
          <span class="tag-pill">EHS Management</span>
          <span class="tag-pill">HRA</span>
          <span class="tag-pill">SPS-106</span>
        </div>
      </div>

      <div class="header-actions">
        <!-- Download Excel -->
        <a href="https://hra-virsim.pages.dev/img/HRA_Material_Handling_Risk_Assessment.xlsx"
           class="download-btn"
           target="_blank" rel="noopener">
          <span>‚¨áÔ∏è</span>
          <span data-i18n="btnDownload">Download Excel HRA</span>
        </a>

        <!-- Language Toggle -->
        <button type="button" class="header-btn" id="langToggle">
          <span>üåê</span>
          <span id="langLabel">EN / ID</span>
        </button>

        <!-- Print -->
        <button type="button" class="header-btn" id="printBtn">
          <span>üñ®Ô∏è</span>
          <span data-i18n="btnPrint">Print / PDF</span>
        </button>

        <!-- Dark Mode -->
        <button type="button" class="header-btn" id="themeToggle">
          <span id="themeToggleIcon">üåô</span>
        </button>
      </div>
    </div>
  </header>

  <div class="layout">
    <!-- SIDENAV -->
    <aside class="sidenav" id="sidenavMobile">
      <!-- Grouping header agar bisa di klik di mobile -->
      <div class="sidenav-header-group" id="sidenavHeaderGroup">
        <div class="sidenav-title" data-i18n="navTitle">Daftar Isi</div>
        <span class="sidenav-toggle-icon">‚ñº</span>
      </div>
       
      <!-- FIXED: Added href attributes to all links for SEO/Crawler visibility -->
      <ul class="nav-list">
        <li class="nav-item">
          <a class="nav-link active" href="#scope" data-target="scope">
            <span class="index">1</span>
            <span data-i18n="nav1">Scope &amp; Asumsi</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#risk-matrix" data-target="risk-matrix">
            <span class="index">2</span>
            <span data-i18n="nav2">Risk Matrix</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#risk-calculator" data-target="risk-calculator">
            <span class="index">2.1</span>
            <span data-i18n="nav21">Risk Calculator</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#risk-assessment" data-target="risk-assessment">
            <span class="index">3</span>
            <span data-i18n="nav3">Risk Assessment HRA</span>
          </a>
          <ul class="nav-sublist">
            <li><a class="nav-sublink" href="#sec-3-1" data-target="sec-3-1" data-i18n="nav31">3.1 Perencanaan &amp; Forecasting</a></li>
            <li><a class="nav-sublink" href="#sec-3-2" data-target="sec-3-2" data-i18n="nav32">3.2 Loading &amp; Unloading</a></li>
            <li><a class="nav-sublink" href="#sec-3-3" data-target="sec-3-3" data-i18n="nav33">3.3 Transport Internal</a></li>
            <li><a class="nav-sublink" href="#sec-3-4" data-target="sec-3-4" data-i18n="nav34">3.4 Peralatan Bantu</a></li>
            <li><a class="nav-sublink" href="#sec-3-5" data-target="sec-3-5" data-i18n="nav35">3.5 Penyimpanan &amp; Stacking</a></li>
            <li><a class="nav-sublink" href="#sec-3-6" data-target="sec-3-6" data-i18n="nav36">3.6 Inspeksi &amp; Maintenance</a></li>
            <li><a class="nav-sublink" href="#sec-3-7" data-target="sec-3-7" data-i18n="nav37">3.7 Interaksi Pedestrian</a></li>
            <li><a class="nav-sublink" href="#sec-3-8" data-target="sec-3-8" data-i18n="nav38">3.8 Dokumentasi &amp; Training</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#next-steps" data-target="next-steps">
            <span class="index">4</span>
            <span data-i18n="nav4">Langkah Lanjut</span>
          </a>
        </li>
      </ul>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content">
      <!-- RINGKASAN RISIKO -->
      <section id="risk-summary">
        <h2>
          <span data-i18n="secSummaryTitle">Ringkasan Risiko</span>
          <span class="badge">Overview</span>
        </h2>
        <p class="muted" data-i18n="secSummaryDesc">
          Ringkasan ini membantu melihat gambaran umum tingkat risiko dari seluruh aktivitas material handling, serta menyoroti beberapa skenario dengan <strong>risk score</strong> tertinggi.
        </p>

        <div class="summary-grid">
          <div class="summary-card">
            <div class="summary-card-label">
              <span class="summary-dot high"></span>
              <span data-i18n="labelHigh">High / Critical Risk</span>
            </div>
            <div class="summary-card-value">
              <span id="countHigh">0</span>
              <span class="summary-pill">R ‚â• 16</span>
            </div>
          </div>
          <div class="summary-card">
            <div class="summary-card-label">
              <span class="summary-dot med"></span>
              <span data-i18n="labelMed">Medium Risk</span>
            </div>
            <div class="summary-card-value">
              <span id="countMed">0</span>
              <span class="summary-pill">9 ‚â§ R ‚â§ 15</span>
            </div>
          </div>
          <div class="summary-card">
            <div class="summary-card-label">
              <span class="summary-dot low"></span>
              <span data-i18n="labelLow">Low Risk</span>
            </div>
            <div class="summary-card-value">
              <span id="countLow">0</span>
              <span class="summary-pill">R ‚â§ 8</span>
            </div>
          </div>
        </div>

        <div class="top-risk-list">
          <div class="top-risk-header">
            <div class="top-risk-title" data-i18n="topRiskTitle">Top 5 Risiko Tertinggi</div>
            <div class="top-risk-filter">
              <!-- Note: Contrast fixed via --accent css variable -->
              <button class="filter-chip active" data-filter="all" data-i18n="filterAll">Semua</button>
              <button class="filter-chip" data-filter="high">High</button>
              <button class="filter-chip" data-filter="med">Medium</button>
              <button class="filter-chip" data-filter="low">Low</button>
            </div>
          </div>
          <div id="topRiskContainer"></div>
        </div>
      </section>

      <!-- 1. SCOPE & ASUMSI -->
      <section id="scope">
        <h2>
          <span data-i18n="sec1Title">Scope &amp; Asumsi</span>
          <span class="badge">1</span>
        </h2>
        <p data-i18n="sec1Desc">
          HRA ‚Äì Material Handling ini mengatur seluruh kegiatan pemindahan, penataan, dan penyimpanan material menggunakan peralatan mekanis maupun manual di area proyek konstruksi. Dokumen ini menjadi rujukan bagi semua pihak (AA, MHC, PA, Operator, Spotter, serta pekerja lain) dalam merencanakan dan mengendalikan risiko yang timbul dari aktivitas material handling.
        </p>
        <div class="pill-row">
          <span class="pill" data-i18n="scopePill1">Jenis Aktivitas: loading‚Äìunloading, transport internal, penyimpanan, manual handling terbatas</span>
          <span class="pill" data-i18n="scopePill2">Peralatan: forklift, telehandler, reach truck, pallet jack, hand cart, dolly, dsb.</span>
          <span class="pill" data-i18n="scopePill3">Area: yard, loading bay, jalan internal, koridor bangunan, area penyimpanan, lantai bangunan</span>
          <span class="pill" data-i18n="scopePill4">Peran: AA, MHC, PA, Operator, Spotter, pekerja / pedestrian lain</span>
        </div>
        <p class="muted mb-4" data-i18n="sec1Note">
          Catatan: lifting menggunakan crane (tower, mobile, crawler, gantry dan sejenisnya) dikelola dalam HRA <em>Lifting Operation</em> tersendiri, namun tetap harus diselaraskan dengan pengaturan jalur material handling di dokumen ini.
        </p>
      </section>

      <!-- 2. RISK MATRIX -->
      <section id="risk-matrix">
        <h2>
          Risk Matrix
          <span class="badge">2</span>
        </h2>
        <p data-i18n="sec2Desc">
          Penilaian risiko dalam HRA ini menggunakan kombinasi <strong>Likelihood (L)</strong> dan <strong>Consequences (C)</strong> dengan skala 1‚Äì5. Nilai <strong>Risk (R)</strong> diperoleh dari <em>R = L √ó C</em>. Kategori warna mengikuti risk matrix perusahaan untuk memudahkan prioritas pengendalian.
        </p>

        <div class="risk-matrix-wrapper">
          <div class="risk-table-container">
            <table class="risk-matrix">
              <thead>
                <tr>
                  <th rowspan="2">Likelihood (L)</th>
                  <th colspan="5">Consequences (C)</th>
                </tr>
                <tr>
                  <th>1</th><th>2</th><th>3</th><th>4</th><th>5</th>
                </tr>
              </thead>
              <tbody>
                <tr><td class="label">5</td><td class="risk-med">5</td><td class="risk-med">10</td><td class="risk-med">15</td><td class="risk-high">20</td><td class="risk-high">25</td></tr>
                <tr><td class="label">4</td><td class="risk-low">4</td><td class="risk-med">8</td><td class="risk-med">12</td><td class="risk-high">16</td><td class="risk-high">20</td></tr>
                <tr><td class="label">3</td><td class="risk-low">3</td><td class="risk-low">6</td><td class="risk-med">9</td><td class="risk-med">12</td><td class="risk-med">15</td></tr>
                <tr><td class="label">2</td><td class="risk-low">2</td><td class="risk-low">4</td><td class="risk-low">6</td><td class="risk-low">8</td><td class="risk-med">10</td></tr>
                <tr><td class="label">1</td><td class="risk-low">1</td><td class="risk-low">2</td><td class="risk-low">3</td><td class="risk-low">4</td><td class="risk-low">5</td></tr>
              </tbody>
            </table>
          </div>
          <div class="risk-legend">
            <div class="mb-4"><strong data-i18n="riskCatLabel">Kategori Risiko:</strong></div>
            <div class="risk-legend-row">
              <div class="risk-level-chip low">Low (R ‚â§ 8)</div>
              <div class="risk-level-chip med">Medium (9 ‚â§ R ‚â§ 15)</div>
              <div class="risk-level-chip high">High (R ‚â• 16)</div>
            </div>
            <p class="muted mb-4" style="margin-top:8px;" data-i18n="riskNote">
              Nilai <strong>L</strong>, <strong>C</strong>, dan <strong>R</strong> dicatat di tabel Risk Assessment HRA ‚Äì Material Handling (per aktivitas). High risk wajib mendapat perhatian manajemen, pengendalian tambahan, dan bila perlu <em>stop work</em> sampai pengendalian terpenuhi.
            </p>
          </div>
        </div>
      </section>

      <!-- 2.1 CALCULATOR -->
      <section id="risk-calculator">
        <h2>
          Risk Calculator
          <span class="badge">2.1</span>
        </h2>
        <p data-i18n="calcDesc">
          Gunakan kalkulator ini untuk memperkirakan level risiko berdasarkan nilai <strong>Likelihood (L)</strong> dan <strong>Consequences (C)</strong> yang kamu sepakati di tim. Hasilnya mengikuti risk matrix di atas.
        </p>
         
        <div class="risk-calc">
          <div class="risk-calc-form">
            <div class="risk-calc-field">
              <label for="inputL">Likelihood (L)</label>
              <select id="inputL">
                <option value="1">1 - Rare / Sangat jarang</option>
                <option value="2">2 - Unlikely / Jarang</option>
                <option value="3">3 - Possible / Kadang-kadang</option>
                <option value="4">4 - Likely / Sering</option>
                <option value="5">5 - Almost Certain / Sangat sering</option>
              </select>
            </div>
            <div class="risk-calc-field">
              <label for="inputC">Consequences (C)</label>
              <select id="inputC">
                <option value="1">1 - Insignificant / Nyaris tidak ada cedera/kerusakan</option>
                <option value="2">2 - Minor / Cedera ringan / kerusakan minor</option>
                <option value="3">3 - Moderate / Cedera medis / kerusakan sedang</option>
                <option value="4">4 - Major / Cedera serius / kerusakan besar</option>
                <option value="5">5 - Catastrophic / Fatality / kerusakan sangat besar</option>
              </select>
            </div>
            <button id="btnCalc" data-i18n="btnCalc">Hitung Risk</button>
          </div>

          <div class="risk-calc-result" id="riskResult" data-level="low">
            <div style="display:flex; justify-content:space-between; align-items:baseline;">
              <div>
                <div style="font-size:0.8rem">Risk Score</div>
                <div class="risk-calc-score">0</div>
              </div>
              <div style="text-align:right">
                <div style="font-size:0.8rem">Level</div>
                <div class="risk-calc-level">-</div>
              </div>
            </div>
            <div class="risk-calc-desc">Result...</div>
          </div>
        </div>
      </section>

      <!-- 3. ASSESSMENT ACCORDION -->
      <section id="risk-assessment">
        <h2>
          <span data-i18n="sec3Title">Risk Assessment HRA ‚Äì Material Handling</span>
          <span class="badge">3</span>
        </h2>
        <p class="muted" data-i18n="sec3Desc">
          Bagian ini merangkum identifikasi bahaya, dampak potensial, serta pengendalian yang ada dan pengendalian tambahan yang direkomendasikan untuk seluruh rangkaian aktivitas material handling.
        </p>
        <p class="muted mb-6" data-i18n="sec3Desc2">
          Tabel detail (No, Aktivitas, Hazard, Dampak, Pengendalian yang Ada, Pengendalian Tambahan, PIC, L, C, R) disusun di file Excel terpisah, sedangkan di sini ditampilkan ringkasan per sub-aspek 3.1‚Äì3.8.
        </p>
         
        <div class="accordion">
          <!-- 3.1 -->
          <div class="acc-item open" id="sec-3-1">
            <div class="acc-header">
              <div class="acc-title">
                <div class="acc-title-main" data-i18n="acc31Title">3.1 Perencanaan &amp; HRA Forecasting</div>
                <div class="acc-title-sub" data-i18n="acc31Sub">Identifikasi aktivitas, jalur pergerakan, dan penetapan peran (AA, MHC, PA)</div>
              </div>
              <div class="acc-icon">‚ñ∂</div>
            </div>
            <div class="acc-body">
              <p data-i18n="acc31Body">
                Fokus utama pada penetapan lingkup pekerjaan material handling, penunjukan Material Handling Coordinator (MHC), serta penyusunan HRA Plan dan Equipment Movement Plan yang terintegrasi dengan Site-Specific EHS Plan dan Site Logistics EHS Plan.
              </p>
              <ul>
                <li data-i18n="acc31Li1">Identifikasi seluruh aktivitas material handling berdasarkan jadwal proyek dan layout aktual.</li>
                <li data-i18n="acc31Li2">Penetapan jalur pergerakan equipment dan area loading/unloading yang aman (termasuk exclusion zone).</li>
                <li data-i18n="acc31Li3">Penentuan kebutuhan izin kerja dan emergency plan terkait material handling.</li>
                <li data-i18n="acc31Li4">Pengelolaan perubahan layout melalui update gambar / BIM untuk menjaga validitas HRA.</li>
              </ul>
            </div>
          </div>
          <!-- 3.2 -->
          <div class="acc-item" id="sec-3-2">
            <div class="acc-header">
              <div class="acc-title">
                <div class="acc-title-main" data-i18n="acc32Title">3.2 Loading &amp; Unloading dari Truk</div>
                <div class="acc-title-sub" data-i18n="acc32Sub">Pengaturan masuk-keluar truk, stabilitas beban, dan proteksi pekerja</div>
              </div>
              <div class="acc-icon">‚ñ∂</div>
            </div>
            <div class="acc-body">
              <p data-i18n="acc32Body">
                Mengelola risiko saat truk masuk ke area loading/unloading, saat proses bongkar muat menggunakan forklift/telehandler, serta saat pekerja berada di atas bak truk untuk pengikatan atau pelepasan ikatan.
              </p>
              <ul>
                <li data-i18n="acc32Li1">Koordinasi kedatangan truk hanya melalui jalur dan slot bongkar-muat yang telah ditetapkan.</li>
                <li data-i18n="acc32Li2">Penetapan exclusion zone di sekitar truk dan peralatan material handling untuk mencegah pekerja masuk blind spot.</li>
                <li data-i18n="acc32Li3">Penggunaan peralatan yang sesuai kapasitas dan geometri beban serta memastikan load chart tersedia dan dipahami.</li>
                <li data-i18n="acc32Li4">Penerapan fall protection dan platform kerja yang benar ketika pekerja harus bekerja di ketinggian di atas muatan.</li>
              </ul>
            </div>
          </div>
          <!-- 3.3 -->
          <div class="acc-item" id="sec-3-3">
            <div class="acc-header">
              <div class="acc-title">
                <div class="acc-title-main" data-i18n="acc33Title">3.3 Transport Material di Dalam Site</div>
                <div class="acc-title-sub" data-i18n="acc33Sub">Pergerakan forklift/telehandler di jalan internal, koridor, dan tepi slab</div>
              </div>
              <div class="acc-icon">‚ñ∂</div>
            </div>
            <div class="acc-body">
              <p data-i18n="acc33Body">
                Meliputi pergerakan equipment saat mengangkut material di area proyek, termasuk di jalur sempit, area ramai pedestrian, tanjakan/turunan, dan area dekat tepi slab.
              </p>
              <ul>
                <li data-i18n="acc33Li1">Penetapan speed limit dan safe distance dari tepi slab atau area berisiko jatuh.</li>
                <li data-i18n="acc33Li2">Pemisahan fisik antara jalur pejalan kaki dan jalur equipment (barrier, marking, signage).</li>
                <li data-i18n="acc33Li3">Penggunaan Spotter saat reversing, di area dengan visibilitas terbatas, dan di area ramai pekerja.</li>
                <li data-i18n="acc33Li4">Pengaturan metode transport untuk beban tinggi yang menutup pandangan (misalnya berjalan mundur dengan bantuan Spotter).</li>
              </ul>
            </div>
          </div>
           <!-- 3.4 -->
           <div class="acc-item" id="sec-3-4">
            <div class="acc-header">
              <div class="acc-title">
                <div class="acc-title-main" data-i18n="acc34Title">3.4 Penggunaan Peralatan Bantu (Pallet Jack, Cart, dll.)</div>
                <div class="acc-title-sub" data-i18n="acc34Sub">Pemilihan alat bantu dan pencegahan overexertion / MSD</div>
              </div>
              <div class="acc-icon">‚ñ∂</div>
            </div>
            <div class="acc-body">
              <p data-i18n="acc34Body">
                Menangani risiko penggunaan pallet jack, hand cart, dan alat bantu lain, terutama di area miring, sempit, dan dengan jarak tempuh yang panjang.
              </p>
              <ul>
                <li data-i18n="acc34Li1">Pemilihan alat bantu berdasarkan kapasitas, dimensi beban, dan kondisi permukaan lantai.</li>
                <li data-i18n="acc34Li2">Pengaturan batas kemiringan maksimal di mana pallet jack masih diperbolehkan digunakan.</li>
                <li data-i18n="acc34Li3">Pelatihan teknik mendorong/menarik yang benar untuk mengurangi risiko musculoskeletal disorders (MSD).</li>
                <li data-i18n="acc34Li4">Pemanfaatan cart atau sistem roller untuk mengurangi kebutuhan manual handling berulang.</li>
              </ul>
            </div>
          </div>
          <!-- 3.5 -->
          <div class="acc-item" id="sec-3-5">
            <div class="acc-header">
              <div class="acc-title">
                <div class="acc-title-main" data-i18n="acc35Title">3.5 Penyimpanan &amp; Stacking Material</div>
                <div class="acc-title-sub" data-i18n="acc35Sub">Konsep ‚Äúnothing touches the ground‚Äù, kapasitas lantai, dan kompatibilitas material</div>
              </div>
              <div class="acc-icon">‚ñ∂</div>
            </div>
            <div class="acc-body">
              <p data-i18n="acc35Body">
                Fokus pada cara menyusun, menyimpan, dan mengamankan material agar tidak roboh, bergeser, atau menyebabkan overloading pada lantai dan rak penyimpanan.
              </p>
              <ul>
                <li data-i18n="acc35Li1">Penerapan konsep ‚Äúnothing touches the ground‚Äù: material ditempatkan pada pallet, rack, atau cart.</li>
                <li data-i18n="acc35Li2">Penetapan dan penandaan maksimum beban aman (floor &amp; rack safe load limit).</li>
                <li data-i18n="acc35Li3">Pemisahan material yang tidak kompatibel (misalnya bahan kimia atau material mudah terbakar).</li>
                <li data-i18n="acc35Li4">Penyusunan ketinggian maksimum untuk material tertentu (pipa, panel, cable drum, dsb.).</li>
              </ul>
            </div>
          </div>
          <!-- 3.6 -->
          <div class="acc-item" id="sec-3-6">
            <div class="acc-header">
              <div class="acc-title">
                <div class="acc-title-main" data-i18n="acc36Title">3.6 Inspeksi &amp; Maintenance Peralatan</div>
                <div class="acc-title-sub" data-i18n="acc36Sub">Pre-use check, tagging, dan perawatan yang aman</div>
              </div>
              <div class="acc-icon">‚ñ∂</div>
            </div>
            <div class="acc-body">
              <p data-i18n="acc36Body">
                Mengatur inspeksi harian sebelum penggunaan, penarikan peralatan yang defect dari operasi, serta perawatan dan perbaikan peralatan oleh personel yang kompeten.
              </p>
              <ul>
                <li data-i18n="acc36Li1">Pre-use inspection dengan checklist yang terdokumentasi untuk setiap forklift/telehandler/pallet jack.</li>
                <li data-i18n="acc36Li2">Peralatan dengan temuan kerusakan harus segera ditandai dan ditarik dari operasi sampai diperbaiki.</li>
                <li data-i18n="acc36Li3">Maintenance dilakukan sesuai manual pabrikan dan prosedur energi terisolasi (LOTO) bila diperlukan.</li>
                <li data-i18n="acc36Li4">Penanganan bahan bakar dan pengisian baterai di area yang terventilasi dan bebas sumber api.</li>
              </ul>
            </div>
          </div>
          <!-- 3.7 -->
          <div class="acc-item" id="sec-3-7">
            <div class="acc-header">
              <div class="acc-title">
                <div class="acc-title-main" data-i18n="acc37Title">3.7 Interaksi dengan Pejalan Kaki &amp; Pekerja Lain</div>
                <div class="acc-title-sub" data-i18n="acc37Sub">Etika crossing, eye contact, dan penggunaan barrier</div>
              </div>
              <div class="acc-icon">‚ñ∂</div>
            </div>
            <div class="acc-body">
              <p data-i18n="acc37Body">
                Menekankan pengendalian interaksi antara mobile equipment dan pekerja lain/pedestrian, termasuk kewajiban eye contact dan hak <em>stop work</em> bagi semua pekerja.
              </p>
              <ul>
                <li data-i18n="acc37Li1">Pelatihan kewaspadaan terhadap jalur material handling bagi seluruh pekerja di site.</li>
                <li data-i18n="acc37Li2">Aturan ‚Äúno eye contact, no crossing‚Äù sebelum melintas di depan atau di belakang equipment.</li>
                <li data-i18n="acc37Li3">Pemasangan barrier dan marking jalur pedestrian untuk memisahkan pejalan kaki dari traffic berat.</li>
                <li data-i18n="acc37Li4">Penekanan hak dan kewajiban stop work jika melihat kondisi pergerakan material yang tidak aman.</li>
              </ul>
            </div>
          </div>
          <!-- 3.8 -->
          <div class="acc-item" id="sec-3-8">
            <div class="acc-header">
              <div class="acc-title">
                <div class="acc-title-main" data-i18n="acc38Title">3.8 Dokumentasi, Training &amp; Lessons Learned</div>
                <div class="acc-title-sub" data-i18n="acc38Sub">Pengelolaan HRA form, training record, audit, dan perbaikan berkelanjutan</div>
              </div>
              <div class="acc-icon">‚ñ∂</div>
            </div>
            <div class="acc-body">
              <p data-i18n="acc38Body">
                Mengelola bukti tertulis HRA Material Handling, kompetensi operator dan Spotter, serta tindak lanjut hasil audit dan investigasi insiden/near miss.
              </p>
              <ul>
                <li data-i18n="acc38Li1">Penyelesaian dan pengarsipan Hazard Analysis Form untuk setiap aktivitas material handling kritis.</li>
                <li data-i18n="acc38Li2">Pemeliharaan training records untuk operator, Spotter, dan pekerja terkait sesuai requirement.</li>
                <li data-i18n="acc38Li3">Pelaksanaan audit periodik material handling dan tindak lanjut temuan audit.</li>
                <li data-i18n="acc38Li4">Pencatatan insiden dan near miss, analisis akar masalah, serta pembagian lessons learned ke seluruh tim.</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- 4. LANGKAH LANJUT -->
      <section id="next-steps">
        <h2>
          <span data-i18n="sec4Title">Langkah Lanjut yang Bisa Kamu Lakukan</span>
          <span class="badge">4</span>
        </h2>
        <p data-i18n="sec4Desc">
          Bagian ini memberikan panduan implementasi HRA ‚Äì Material Handling di lapangan, sehingga dokumen tidak berhenti pada level teori, tetapi benar-benar menjadi alat pengendali risiko harian.
        </p>

        <div class="steps">
          <div class="step">
            <div class="step-index">1</div>
            <div>
              <div class="step-content-title" data-i18n="step1Title">Finalisasi Penilaian Risiko (L, C, R)</div>
              <div class="step-content-text" data-i18n="step1Text">
                Lengkapi nilai Likelihood, Consequences, dan Risk untuk setiap aktivitas dalam tabel Excel bersama AA, MHC, dan PA. Pastikan High Risk mendapat pengendalian tambahan dan, bila perlu, penundaan pekerjaan sampai kontrol terpenuhi.
              </div>
            </div>
          </div>
          <div class="step">
            <div class="step-index">2</div>
            <div>
              <div class="step-content-title" data-i18n="step2Title">Integrasi dengan Dokumen EHS Proyek</div>
              <div class="step-content-text" data-i18n="step2Text">
                Lampirkan HRA ‚Äì Material Handling dalam Site-Specific EHS Plan dan Site Logistics EHS Plan. Pastikan jalur pergerakan material, lokasi storage, dan prosedur loading/unloading konsisten di seluruh dokumen.
              </div>
            </div>
          </div>
          <div class="step">
            <div class="step-index">3</div>
            <div>
              <div class="step-content-title" data-i18n="step3Title">Sosialisasi &amp; Training</div>
              <div class="step-content-text" data-i18n="step3Text">
                Gunakan HRA ini sebagai materi toolbox meeting, induction, dan refresher training untuk operator, Spotter, dan pekerja lain. Tekankan poin-poin praktis seperti eye contact, exclusion zone, dan penggunaan alat bantu yang benar.
              </div>
            </div>
          </div>
          <div class="step">
            <div class="step-index">4</div>
            <div>
              <div class="step-content-title" data-i18n="step4Title">Monitoring Lapangan &amp; Audit</div>
              <div class="step-content-text" data-i18n="step4Text">
                Lakukan observasi rutin di area material handling untuk memastikan kontrol yang tertulis memang dijalankan. Gunakan checklist atau form audit sederhana untuk merekam temuan dan tindak lanjut.
              </div>
            </div>
          </div>
          <div class="step">
            <div class="step-index">5</div>
            <div>
              <div class="step-content-title" data-i18n="step5Title">Review &amp; Update Berkala</div>
              <div class="step-content-text" data-i18n="step5Text">
                Tinjau kembali HRA ini ketika ada perubahan layout, metode kerja, jenis material, ataupun setelah terjadinya insiden/near miss. Perubahan signifikan pada jalur material handling perlu dicerminkan pada gambar layout/BIM dan HRA yang diperbarui.
              </div>
            </div>
          </div>
          <!-- Added Step 6 for Permit to Work -->
          <div class="step">
            <div class="step-index">6</div>
            <div>
              <div class="step-content-title" data-i18n="step6Title">Evaluasi Kebutuhan Izin Kerja (Permit to Work)</div>
              <div class="step-content-text" data-i18n="step6Text">
                Izin kerja tidak selalu wajib, namun diperlukan jika aktivitas dikategorikan sebagai <strong>Critical Material Handling</strong>, melibatkan bahaya lain (seperti <em>Hot Work</em>, <em>Confined Space</em>, atau <em>LOTO</em>), atau menggunakan alat angkat khusus (Lift Permit).
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- FOOTER -->
      <footer class="footer">
        <div>
          Created @2025 by Virsim and 
          <a href="https://id.linkedin.com/in/iwan-kurniawan-83532226" target="_blank" rel="noopener">Iwan Kurniawan</a>
        </div>
        <div class="footer-sub">Sustainability learning development</div>
      </footer>
    </main>
  </div>
</div>

<script>
  // ==========================
  // DATA BAHASA (TRANSLATION)
  // ==========================
  const translations = {
    id: {
      headerTitle: "HRA ‚Äì Material Handling",
      headerSub: "High Risk Activity ‚Äì Material Handling di Area Proyek Konstruksi",
      btnDownload: "Download Excel HRA",
      btnPrint: "Print / PDF",
      navTitle: "Daftar Isi",
      nav1: "Scope & Asumsi",
      nav2: "Risk Matrix",
      nav21: "Risk Calculator",
      nav3: "Risk Assessment HRA",
      nav31: "3.1 Perencanaan & Forecasting",
      nav32: "3.2 Loading & Unloading",
      nav33: "3.3 Transport Internal",
      nav34: "3.4 Peralatan Bantu",
      nav35: "3.5 Penyimpanan & Stacking",
      nav36: "3.6 Inspeksi & Maintenance",
      nav37: "3.7 Interaksi dengan Pejalan Kaki",
      nav38: "3.8 Dokumentasi & Training",
      nav4: "Langkah Lanjut",
      secSummaryTitle: "Ringkasan Risiko",
      secSummaryDesc: "Ringkasan ini membantu melihat gambaran umum tingkat risiko dari seluruh aktivitas material handling, serta menyoroti beberapa skenario dengan <strong>risk score</strong> tertinggi.",
      labelHigh: "High / Critical Risk",
      labelMed: "Medium Risk",
      labelLow: "Low Risk",
      topRiskTitle: "Top 5 Risiko Tertinggi",
      filterAll: "Semua",
      sec1Title: "Scope & Asumsi",
      sec1Desc: "HRA ‚Äì Material Handling ini mengatur seluruh kegiatan pemindahan, penataan, dan penyimpanan material menggunakan peralatan mekanis maupun manual di area proyek konstruksi. Dokumen ini menjadi rujukan bagi semua pihak (AA, MHC, PA, Operator, Spotter, serta pekerja lain) dalam merencanakan dan mengendalikan risiko yang timbul dari aktivitas material handling.",
      scopePill1: "Jenis Aktivitas: loading‚Äìunloading, transport internal, penyimpanan, manual handling terbatas",
      scopePill2: "Peralatan: forklift, telehandler, reach truck, pallet jack, hand cart, dolly, dsb.",
      scopePill3: "Area: yard, loading bay, jalan internal, koridor bangunan, area penyimpanan, lantai bangunan",
      scopePill4: "Peran: AA, MHC, PA, Operator, Spotter, pekerja / pedestrian lain",
      sec1Note: "Catatan: lifting menggunakan crane (tower, mobile, crawler, gantry dan sejenisnya) dikelola dalam HRA <em>Lifting Operation</em> tersendiri, namun tetap harus diselaraskan dengan pengaturan jalur material handling di dokumen ini.",
      sec2Desc: "Penilaian risiko dalam HRA ini menggunakan kombinasi <strong>Likelihood (L)</strong> dan <strong>Consequences (C)</strong> dengan skala 1‚Äì5. Nilai <strong>Risk (R)</strong> diperoleh dari <em>R = L √ó C</em>. Kategori warna mengikuti risk matrix perusahaan untuk memudahkan prioritas pengendalian.",
      riskCatLabel: "Kategori Risiko:",
      riskNote: "Nilai <strong>L</strong>, <strong>C</strong>, dan <strong>R</strong> dicatat di tabel Risk Assessment HRA ‚Äì Material Handling (per aktivitas). High risk wajib mendapat perhatian manajemen, pengendalian tambahan, dan bila perlu <em>stop work</em> sampai pengendalian terpenuhi.",
      calcDesc: "Gunakan kalkulator ini untuk memperkirakan level risiko berdasarkan nilai <strong>Likelihood (L)</strong> dan <strong>Consequences (C)</strong> yang kamu sepakati di tim. Hasilnya mengikuti risk matrix di atas.",
      btnCalc: "Hitung Risk",
      sec3Title: "Risk Assessment HRA ‚Äì Material Handling",
      sec3Desc: "Bagian ini merangkum identifikasi bahaya, dampak potensial, serta pengendalian yang ada dan pengendalian tambahan yang direkomendasikan untuk seluruh rangkaian aktivitas material handling.",
      sec3Desc2: "Tabel detail (No, Aktivitas, Hazard, Dampak, Pengendalian yang Ada, Pengendalian Tambahan, PIC, L, C, R) disusun di file Excel terpisah, sedangkan di sini ditampilkan ringkasan per sub-aspek 3.1‚Äì3.8.",
       
      // Accordion 3.1
      acc31Title: "3.1 Perencanaan & Forecasting",
      acc31Sub: "Identifikasi aktivitas, jalur pergerakan, dan penetapan peran (AA, MHC, PA)",
      acc31Body: "Fokus utama pada penetapan lingkup pekerjaan material handling, penunjukan Material Handling Coordinator (MHC), serta penyusunan HRA Plan dan Equipment Movement Plan yang terintegrasi dengan Site-Specific EHS Plan dan Site Logistics EHS Plan.",
      acc31Li1: "Identifikasi seluruh aktivitas material handling berdasarkan jadwal proyek dan layout aktual.",
      acc31Li2: "Penetapan jalur pergerakan equipment dan area loading/unloading yang aman (termasuk exclusion zone).",
      acc31Li3: "Penentuan kebutuhan izin kerja dan emergency plan terkait material handling.",
      acc31Li4: "Pengelolaan perubahan layout melalui update gambar / BIM untuk menjaga validitas HRA.",

      // Accordion 3.2
      acc32Title: "3.2 Loading & Unloading dari Truk",
      acc32Sub: "Pengaturan masuk-keluar truk, stabilitas beban, dan proteksi pekerja",
      acc32Body: "Mengelola risiko saat truk masuk ke area loading/unloading, saat proses bongkar muat menggunakan forklift/telehandler, serta saat pekerja berada di atas bak truk untuk pengikatan atau pelepasan ikatan.",
      acc32Li1: "Koordinasi kedatangan truk hanya melalui jalur dan slot bongkar-muat yang telah ditetapkan.",
      acc32Li2: "Penetapan exclusion zone di sekitar truk dan peralatan material handling untuk mencegah pekerja masuk blind spot.",
      acc32Li3: "Penggunaan peralatan yang sesuai kapasitas dan geometri beban serta memastikan load chart tersedia dan dipahami.",
      acc32Li4: "Penerapan fall protection dan platform kerja yang benar ketika pekerja harus bekerja di ketinggian di atas muatan.",

      // Accordion 3.3
      acc33Title: "3.3 Transport Material di Dalam Site",
      acc33Sub: "Pergerakan forklift/telehandler di jalan internal, koridor, dan tepi slab",
      acc33Body: "Meliputi pergerakan equipment saat mengangkut material di area proyek, termasuk di jalur sempit, area ramai pedestrian, tanjakan/turunan, dan area dekat tepi slab.",
      acc33Li1: "Penetapan speed limit dan safe distance dari tepi slab atau area berisiko jatuh.",
      acc33Li2: "Pemisahan fisik antara jalur pejalan kaki dan jalur equipment (barrier, marking, signage).",
      acc33Li3: "Penggunaan Spotter saat reversing, di area dengan visibilitas terbatas, dan di area ramai pekerja.",
      acc33Li4: "Pengaturan metode transport untuk beban tinggi yang menutup pandangan (misalnya berjalan mundur dengan bantuan Spotter).",

      // Accordion 3.4
      acc34Title: "3.4 Penggunaan Peralatan Bantu (Pallet Jack, Cart, dll.)",
      acc34Sub: "Pemilihan alat bantu dan pencegahan overexertion / MSD",
      acc34Body: "Menangani risiko penggunaan pallet jack, hand cart, dan alat bantu lain, terutama di area miring, sempit, dan dengan jarak tempuh yang panjang.",
      acc34Li1: "Pemilihan alat bantu berdasarkan kapasitas, dimensi beban, dan kondisi permukaan lantai.",
      acc34Li2: "Pengaturan batas kemiringan maksimal di mana pallet jack masih diperbolehkan digunakan.",
      acc34Li3: "Pelatihan teknik mendorong/menarik yang benar untuk mengurangi risiko musculoskeletal disorders (MSD).",
      acc34Li4: "Pemanfaatan cart atau sistem roller untuk mengurangi kebutuhan manual handling berulang.",

      // Accordion 3.5
      acc35Title: "3.5 Penyimpanan & Stacking Material",
      acc35Sub: "Konsep ‚Äúnothing touches the ground‚Äù, kapasitas lantai, dan kompatibilitas material",
      acc35Body: "Fokus pada cara menyusun, menyimpan, dan mengamankan material agar tidak roboh, bergeser, atau menyebabkan overloading pada lantai dan rak penyimpanan.",
      acc35Li1: "Penerapan konsep ‚Äúnothing touches the ground‚Äù: material ditempatkan pada pallet, rack, atau cart.",
      acc35Li2: "Penetapan dan penandaan maksimum beban aman (floor & rack safe load limit).",
      acc35Li3: "Pemisahan material yang tidak kompatibel (misalnya bahan kimia atau material mudah terbakar).",
      acc35Li4: "Penyusunan ketinggian maksimum untuk material tertentu (pipa, panel, cable drum, dsb.).",

      // Accordion 3.6
      acc36Title: "3.6 Inspeksi & Maintenance Peralatan",
      acc36Sub: "Pre-use check, tagging, dan perawatan yang aman",
      acc36Body: "Mengatur inspeksi harian sebelum penggunaan, penarikan peralatan yang defect dari operasi, serta perawatan dan perbaikan peralatan oleh personel yang kompeten.",
      acc36Li1: "Pre-use inspection dengan checklist yang terdokumentasi untuk setiap forklift/telehandler/pallet jack.",
      acc36Li2: "Peralatan dengan temuan kerusakan harus segera ditandai dan ditarik dari operasi sampai diperbaiki.",
      acc36Li3: "Maintenance dilakukan sesuai manual pabrikan dan prosedur energi terisolasi (LOTO) bila diperlukan.",
      acc36Li4: "Penanganan bahan bakar dan pengisian baterai di area yang terventilasi dan bebas sumber api.",

      // Accordion 3.7
      acc37Title: "3.7 Interaksi dengan Pejalan Kaki & Pekerja Lain",
      acc37Sub: "Etika crossing, eye contact, dan penggunaan barrier",
      acc37Body: "Menekankan pengendalian interaksi antara mobile equipment dan pekerja lain/pedestrian, termasuk kewajiban eye contact dan hak stop work bagi semua pekerja.",
      acc37Li1: "Pelatihan kewaspadaan terhadap jalur material handling bagi seluruh pekerja di site.",
      acc37Li2: "Aturan ‚Äúno eye contact, no crossing‚Äù sebelum melintas di depan atau di belakang equipment.",
      acc37Li3: "Pemasangan barrier dan marking jalur pedestrian untuk memisahkan pejalan kaki dari traffic berat.",
      acc37Li4: "Penekanan hak dan kewajiban stop work jika melihat kondisi pergerakan material yang tidak aman.",

      // Accordion 3.8
      acc38Title: "3.8 Dokumentasi, Training & Lessons Learned",
      acc38Sub: "Pengelolaan HRA form, training record, audit, dan perbaikan berkelanjutan",
      acc38Body: "Mengelola bukti tertulis HRA Material Handling, kompetensi operator dan Spotter, serta tindak lanjut hasil audit dan investigasi insiden/near miss.",
      acc38Li1: "Penyelesaian dan pengarsipan Hazard Analysis Form untuk setiap aktivitas material handling kritis.",
      acc38Li2: "Pemeliharaan training records untuk operator, Spotter, dan pekerja terkait sesuai requirement.",
      acc38Li3: "Pelaksanaan audit periodik material handling dan tindak lanjut temuan audit.",
      acc38Li4: "Pencatatan insiden dan near miss, analisis akar masalah, serta pembagian lessons learned ke seluruh tim.",

      // Steps Section
      sec4Title: "Langkah Lanjut yang Bisa Kamu Lakukan",
      sec4Desc: "Bagian ini memberikan panduan implementasi HRA ‚Äì Material Handling di lapangan, sehingga dokumen tidak berhenti pada level teori, tetapi benar-benar menjadi alat pengendali risiko harian.",
      step1Title: "Finalisasi Penilaian Risiko (L, C, R)",
      step1Text: "Lengkapi nilai Likelihood, Consequences, dan Risk untuk setiap aktivitas dalam tabel Excel bersama AA, MHC, dan PA. Pastikan High Risk mendapat pengendalian tambahan dan, bila perlu, penundaan pekerjaan sampai kontrol terpenuhi.",
      step2Title: "Integrasi dengan Dokumen EHS Proyek",
      step2Text: "Lampirkan HRA ‚Äì Material Handling dalam Site-Specific EHS Plan dan Site Logistics EHS Plan. Pastikan jalur pergerakan material, lokasi storage, dan prosedur loading/unloading konsisten di seluruh dokumen.",
      step3Title: "Sosialisasi & Training",
      step3Text: "Gunakan HRA ini sebagai materi toolbox meeting, induction, dan refresher training untuk operator, Spotter, dan pekerja lain. Tekankan poin-poin praktis seperti eye contact, exclusion zone, dan penggunaan alat bantu yang benar.",
      step4Title: "Monitoring Lapangan & Audit",
      step4Text: "Lakukan observasi rutin di area material handling untuk memastikan kontrol yang tertulis memang dijalankan. Gunakan checklist atau form audit sederhana untuk merekam temuan dan tindak lanjut.",
      step5Title: "Review & Update Berkala",
      step5Text: "Tinjau kembali HRA ini ketika ada perubahan layout, metode kerja, jenis material, ataupun setelah terjadinya insiden/near miss. Perubahan signifikan pada jalur material handling perlu dicerminkan pada gambar layout/BIM dan HRA yang diperbarui.",
       
      // Step 6 (New)
      step6Title: "Evaluasi Kebutuhan Izin Kerja (Permit to Work)",
      step6Text: "Izin kerja tidak selalu wajib, namun diperlukan jika aktivitas dikategorikan sebagai <strong>Critical Material Handling</strong>, melibatkan bahaya lain (seperti <em>Hot Work</em>, <em>Confined Space</em>, atau <em>LOTO</em>), atau menggunakan alat angkat khusus (Lift Permit)."
    },
    en: {
      headerTitle: "HRA ‚Äì Material Handling",
      headerSub: "High Risk Activity ‚Äì Material Handling in Construction Project Areas",
      btnDownload: "Download HRA Excel",
      btnPrint: "Print / PDF",
      navTitle: "Table of Contents",
      nav1: "Scope & Assumptions",
      nav2: "Risk Matrix",
      nav21: "Risk Calculator",
      nav3: "Risk Assessment HRA",
      nav31: "3.1 Planning & Forecasting",
      nav32: "3.2 Loading & Unloading",
      nav33: "3.3 Internal Transport",
      nav34: "3.4 Auxiliary Equipment",
      nav35: "3.5 Storage & Stacking",
      nav36: "3.6 Inspection & Maintenance",
      nav37: "3.7 Pedestrian Interaction",
      nav38: "3.8 Documentation & Training",
      nav4: "Next Steps",
      secSummaryTitle: "Risk Summary",
      secSummaryDesc: "This summary provides an overview of risk levels for all material handling activities and highlights several scenarios with the highest <strong>risk scores</strong>.",
      labelHigh: "High / Critical Risk",
      labelMed: "Medium Risk",
      labelLow: "Low Risk",
      topRiskTitle: "Top 5 Highest Risks",
      filterAll: "All",
      sec1Title: "Scope & Assumptions",
      sec1Desc: "This HRA ‚Äì Material Handling governs all material moving, arranging, and storing activities using mechanical or manual equipment in construction project areas. This document serves as a reference for all parties (AA, MHC, PA, Operator, Spotter, and other workers) in planning and controlling risks arising from material handling activities.",
      scopePill1: "Activity Types: loading‚Äìunloading, internal transport, storage, limited manual handling",
      scopePill2: "Equipment: forklift, telehandler, reach truck, pallet jack, hand cart, dolly, etc.",
      scopePill3: "Areas: yard, loading bay, internal roads, building corridors, storage areas, building floors",
      scopePill4: "Roles: AA, MHC, PA, Operator, Spotter, other workers / pedestrians",
      sec1Note: "Note: lifting using cranes (tower, mobile, crawler, gantry, etc.) is managed in a separate HRA <em>Lifting Operation</em>, but must still be aligned with the material handling path arrangements in this document.",
      sec2Desc: "Risk assessment in this HRA uses a combination of <strong>Likelihood (L)</strong> and <strong>Consequences (C)</strong> on a scale of 1‚Äì5. The <strong>Risk (R)</strong> value is obtained from <em>R = L √ó C</em>. Color categories follow the company's risk matrix to facilitate control prioritization.",
      riskCatLabel: "Risk Categories:",
      riskNote: "Values for <strong>L</strong>, <strong>C</strong>, and <strong>R</strong> are recorded in the HRA ‚Äì Material Handling Risk Assessment table (per activity). High risk must receive management attention, additional controls, and if necessary <em>stop work</em> until controls are met.",
      calcDesc: "Use this calculator to estimate the risk level based on the <strong>Likelihood (L)</strong> and <strong>Consequences (C)</strong> values agreed upon by your team. The results follow the risk matrix above.",
      btnCalc: "Calculate Risk",
      sec3Title: "Risk Assessment HRA ‚Äì Material Handling",
      sec3Desc: "This section summarizes hazard identification, potential impacts, existing controls, and recommended additional controls for the entire sequence of material handling activities.",
      sec3Desc2: "Detailed tables (No, Activity, Hazard, Impact, Existing Controls, Additional Controls, PIC, L, C, R) are compiled in a separate Excel file, while here a summary per sub-aspect 3.1‚Äì3.8 is displayed.",

      // Accordion 3.1 EN
      acc31Title: "3.1 Planning & HRA Forecasting",
      acc31Sub: "Activity identification, movement paths, and role assignment (AA, MHC, PA)",
      acc31Body: "Main focus on defining material handling scope of work, appointing Material Handling Coordinator (MHC), and developing HRA Plan and Equipment Movement Plan integrated with Site-Specific EHS Plan and Site Logistics EHS Plan.",
      acc31Li1: "Identify all material handling activities based on project schedule and actual layout.",
      acc31Li2: "Establish safe equipment movement paths and loading/unloading areas (including exclusion zones).",
      acc31Li3: "Determine work permit requirements and emergency plans related to material handling.",
      acc31Li4: "Manage layout changes through drawing / BIM updates to maintain HRA validity.",

      // Accordion 3.2 EN
      acc32Title: "3.2 Loading & Unloading from Trucks",
      acc32Sub: "Truck entry/exit arrangements, load stability, and worker protection",
      acc32Body: "Managing risks when trucks enter loading/unloading areas, during loading/unloading processes using forklifts/telehandlers, and when workers are on truck beds for securing or releasing ties.",
      acc32Li1: "Coordinate truck arrival only through designated loading/unloading lanes and slots.",
      acc32Li2: "Establish exclusion zones around trucks and material handling equipment to prevent workers from entering blind spots.",
      acc32Li3: "Use equipment suitable for load capacity and geometry, ensuring load charts are available and understood.",
      acc32Li4: "Implement fall protection and proper work platforms when workers must work at heights above loads.",

      // Accordion 3.3 EN
      acc33Title: "3.3 Internal Material Transport",
      acc33Sub: "Forklift/telehandler movement on internal roads, corridors, and slab edges",
      acc33Body: "Covers equipment movement during material transport in project areas, including narrow paths, crowded pedestrian areas, inclines/declines, and areas near slab edges.",
      acc33Li1: "Establish speed limits and safe distances from slab edges or fall hazard areas.",
      acc33Li2: "Physical separation between pedestrian paths and equipment paths (barriers, markings, signage).",
      acc33Li3: "Use of Spotters when reversing, in areas with limited visibility, and in areas crowded with workers.",
      acc33Li4: "Transport method arrangements for high loads that obstruct view (e.g., driving backward with Spotter assistance).",

      // Accordion 3.4 EN
      acc34Title: "3.4 Auxiliary Equipment Usage (Pallet Jack, Cart, etc.)",
      acc34Sub: "Tool selection and prevention of overexertion / MSD",
      acc34Body: "Addressing risks of using pallet jacks, hand carts, and other aids, especially on sloped, narrow areas, and long travel distances.",
      acc34Li1: "Select auxiliary tools based on capacity, load dimensions, and floor surface conditions.",
      acc34Li2: "Set maximum slope limits where pallet jacks are still permitted for use.",
      acc34Li3: "Training on proper pushing/pulling techniques to reduce the risk of musculoskeletal disorders (MSD).",
      acc34Li4: "Utilize carts or roller systems to reduce the need for repetitive manual handling.",

      // Accordion 3.5 EN
      acc35Title: "3.5 Material Storage & Stacking",
      acc35Sub: "‚ÄúNothing touches the ground‚Äù concept, floor capacity, and material compatibility",
      acc35Body: "Focus on how to arrange, store, and secure materials to prevent collapse, shifting, or causing overloading on floors and storage racks.",
      acc35Li1: "Implement ‚Äúnothing touches the ground‚Äù concept: materials placed on pallets, racks, or carts.",
      acc35Li2: "Establish and mark maximum safe loads (floor & rack safe load limits).",
      acc35Li3: "Segregation of incompatible materials (e.g., chemicals or flammable materials).",
      acc35Li4: "Set maximum stacking heights for specific materials (pipes, panels, cable drums, etc.).",

      // Accordion 3.6 EN
      acc36Title: "3.6 Equipment Inspection & Maintenance",
      acc36Sub: "Pre-use check, tagging, and safe maintenance",
      acc36Body: "Governs daily pre-use inspections, removal of defective equipment from operation, and maintenance and repair of equipment by competent personnel.",
      acc36Li1: "Pre-use inspection with documented checklists for every forklift/telehandler/pallet jack.",
      acc36Li2: "Equipment with found defects must be immediately tagged and removed from operation until repaired.",
      acc36Li3: "Maintenance performed according to manufacturer manuals and energy isolation procedures (LOTO) if required.",
      acc36Li4: "Fuel handling and battery charging in ventilated areas free from ignition sources.",

      // Accordion 3.7 EN
      acc37Title: "3.7 Interaction with Pedestrians & Other Workers",
      acc37Sub: "Crossing rules/etiquette, eye contact, and barrier usage",
      acc37Body: "Emphasizes control of interaction between mobile equipment and other workers/pedestrians, including mandatory eye contact and stop work rights for all workers.",
      acc37Li1: "Training on awareness of material handling paths for all workers on site.",
      acc37Li2: "‚ÄúNo eye contact, no crossing‚Äù rule before crossing in front of or behind equipment.",
      acc37Li3: "Installation of barriers and pedestrian path markings to separate pedestrians from heavy traffic.",
      acc37Li4: "Emphasis on rights and obligations to stop work if unsafe material handling conditions are observed.",

      // Accordion 3.8 EN
      acc38Title: "3.8 Documentation, Training & Lessons Learned",
      acc38Sub: "HRA form management, training records, audits, and continuous improvement",
      acc38Body: "Managing written evidence of HRA Material Handling, operator and Spotter competence, and follow-up on audit results and incident/near miss investigations.",
      acc38Li1: "Completion and archiving of Hazard Analysis Forms for every critical material handling activity.",
      acc38Li2: "Maintenance of training records for operators, Spotters, and relevant workers according to requirements.",
      acc38Li3: "Execution of periodic material handling audits and follow-up on audit findings.",
      acc38Li4: "Recording of incidents and near misses, root cause analysis, and sharing lessons learned with the entire team.",

      // Steps Section EN
      sec4Title: "Next Steps You Can Take",
      sec4Desc: "This section provides guidance on implementing HRA ‚Äì Material Handling in the field, so the document does not stop at the theoretical level but truly becomes a daily risk control tool.",
      step1Title: "Finalize Risk Assessment (L, C, R)",
      step1Text: "Complete Likelihood, Consequences, and Risk values for each activity in the Excel table with AA, MHC, and PA. Ensure High Risk receives additional controls and, if necessary, work postponement until controls are met.",
      step2Title: "Integrate with Project EHS Documents",
      step2Text: "Attach HRA ‚Äì Material Handling in Site-Specific EHS Plan and Site Logistics EHS Plan. Ensure material movement paths, storage locations, and loading/unloading procedures are consistent across all documents.",
      step3Title: "Socialization & Training",
      step3Text: "Use this HRA as material for toolbox meetings, inductions, and refresher training for operators, Spotters, and other workers. Emphasize practical points such as eye contact, exclusion zones, and proper use of auxiliary tools.",
      step4Title: "Field Monitoring & Audit",
      step4Text: "Conduct routine observations in material handling areas to ensure written controls are actually implemented. Use checklists or simple audit forms to record findings and follow-ups.",
      step5Title: "Periodic Review & Update",
      step5Text: "Review this HRA when there are changes in layout, work methods, material types, or after an incident/near miss occurs. Significant changes to material handling paths need to be reflected in updated layout drawings/BIM and HRA.",
       
      // Step 6 (New) EN
      step6Title: "Evaluate Permit to Work Requirements",
      step6Text: "Work permits are not automatically mandatory, but are required if the activity is categorized as <strong>Critical Material Handling</strong>, involves other hazards (such as <em>Hot Work</em>, <em>Confined Space</em>, or <em>LOTO</em>), or uses specific lifting equipment (Lift Permit)."
    }
  };

  let currentLang = 'en'; // Default language set to English

  // ==========================
  // DATA RISK (BILINGUAL)
  // ==========================
  const riskData = [
    { 
      code: "MH-01", 
      title: "Unloading material dengan forklift di area sempit", 
      titleEn: "Unloading material with forklift in narrow areas",
      risk: 20 
    },
    { 
      code: "MH-02", 
      title: "Forklift membawa beban tinggi melewati area ramai", 
      titleEn: "Forklift carrying high loads through crowded areas",
      risk: 25 
    },
    { 
      code: "MH-03", 
      title: "Pekerja naik ke atas bak truk tanpa platform", 
      titleEn: "Worker climbing onto truck bed without platform",
      risk: 16 
    },
    { 
      code: "MH-04", 
      title: "Penyimpanan material berat di lantai tanpa verifikasi", 
      titleEn: "Heavy material storage on floor without verification",
      risk: 12 
    },
    { 
      code: "MH-05", 
      title: "Penggunaan pallet jack di ramp curam", 
      titleEn: "Using pallet jack on steep ramps",
      risk: 15 
    },
    { 
      code: "MH-06", 
      title: "Transport material melewati tepi slab", 
      titleEn: "Transporting material past slab edges",
      risk: 18 
    },
    { 
      code: "MH-07", 
      title: "Manual handling beban berat berulang", 
      titleEn: "Repetitive heavy manual handling",
      risk: 9 
    },
    { 
      code: "MH-08", 
      title: "Pedestrian melintas di blindspot alat", 
      titleEn: "Pedestrian crossing in equipment blind spot",
      risk: 20 
    }
  ];

  function getRiskLevel(score) {
    if (score >= 16) return "high";
    if (score >= 9) return "med";
    return "low";
  }

  // ==========================
  // LOGIC
  // ==========================
   
  // 1. Language Toggle
  const langToggle = document.getElementById("langToggle");
  const langLabel = document.getElementById("langLabel");

  function setLanguage(lang) {
    currentLang = lang;
    // If lang is English ('en'), button shows "EN / ID".
    // If lang is Indonesian ('id'), button shows "ID / EN".
    langLabel.textContent = lang === 'en' ? 'EN / ID' : 'ID / EN';
     
    // Update text content elements
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      if (translations[lang][key]) {
        // Use innerHTML because some translations contain <strong> or <em> tags
        el.innerHTML = translations[lang][key];
      }
    });

    // Re-render components that rely on language
    renderRiskSummary(); 
    updateRiskCalculator();
  }

  if (langToggle) {
    langToggle.addEventListener("click", () => {
      const newLang = currentLang === 'id' ? 'en' : 'id';
      setLanguage(newLang);
    });
  }

  // 2. Theme Toggle
  const themeToggle = document.getElementById("themeToggle");
  const themeIcon = document.getElementById("themeToggleIcon");
  function applyTheme(mode) {
    const isDark = mode === "dark";
    document.body.classList.toggle("dark-theme", isDark);
    themeIcon.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
    try { localStorage.setItem("hra-theme", mode); } catch (e) {}
  }
  if (themeToggle) {
    themeToggle.addEventListener("click", () => {
      const isDark = document.body.classList.contains("dark-theme");
      applyTheme(isDark ? "light" : "dark");
    });
  }
   
  // 3. Print
  const printBtn = document.getElementById("printBtn");
  if (printBtn) printBtn.addEventListener("click", () => window.print());

  // 4. Accordion (Content)
  document.querySelectorAll(".acc-header").forEach(header => {
    header.addEventListener("click", () => {
      const item = header.parentElement;
      const isOpen = item.classList.contains("open");
       
      // Close others
      document.querySelectorAll(".acc-item").forEach(i => {
        if (i !== item) {
          i.classList.remove("open");
          i.querySelector(".acc-body").style.maxHeight = 0;
        }
      });

      // Toggle current
      const body = item.querySelector(".acc-body");
      if (!isOpen) {
        item.classList.add("open");
        body.style.maxHeight = body.scrollHeight + "px";
      } else {
        item.classList.remove("open");
        body.style.maxHeight = 0;
      }
    });
  });

  // 5. Risk Summary Logic
  function renderRiskSummary() {
    const countHighEl = document.getElementById("countHigh");
    const countMedEl = document.getElementById("countMed");
    const countLowEl = document.getElementById("countLow");
    const container = document.getElementById("topRiskContainer");
     
    let high = 0, med = 0, low = 0;
    riskData.forEach(r => {
      const level = getRiskLevel(r.risk);
      if (level === "high") high++;
      else if (level === "med") med++;
      else low++;
    });

    if (countHighEl) countHighEl.textContent = high;
    if (countMedEl) countMedEl.textContent = med;
    if (countLowEl) countLowEl.textContent = low;

    const sorted = [...riskData].sort((a, b) => b.risk - a.risk);
    const top5 = sorted.slice(0, 5);
     
    // Check active filter
    const activeChip = document.querySelector('.filter-chip.active');
    const filter = activeChip ? activeChip.getAttribute('data-filter') : 'all';

    container.innerHTML = "";
     
    const list = top5.filter(item => {
      const level = getRiskLevel(item.risk);
      if (filter === "all") return true;
      return level === filter;
    });

    if (list.length === 0) {
      container.innerHTML = `<div class="muted">${currentLang==='id'?'Tidak ada data':'No data'}</div>`;
      return;
    }

    list.forEach(item => {
      const level = getRiskLevel(item.risk);
      const levelLabel = level === "high" ? "High" : level === "med" ? "Medium" : "Low";
      // Pick title based on lang
      const title = currentLang === 'id' ? item.title : (item.titleEn || item.title);
       
      const div = document.createElement("div");
      div.className = `risk-card level-${level}`;
      div.innerHTML = `
        <div class="risk-card-main">
          <div class="risk-card-code">${item.code}</div>
          <div class="risk-card-title">${title}</div>
        </div>
        <div></div>
        <div>
          <div class="risk-score-badge">
            <span class="value">${item.risk}</span> <span>R</span>
          </div>
          <div class="risk-level-chip ${level}">${levelLabel}</div>
        </div>
      `;
      container.appendChild(div);
    });
  }

  // Filter Chips Logic
  document.querySelectorAll('.filter-chip').forEach(chip => {
    chip.addEventListener('click', () => {
      document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
      chip.classList.add('active');
      renderRiskSummary();
    });
  });

  // 6. Risk Calculator
  const btnCalc = document.getElementById("btnCalc");
  const inputL = document.getElementById("inputL");
  const inputC = document.getElementById("inputC");
  const resBox = document.getElementById("riskResult");
  const resScore = resBox.querySelector(".risk-calc-score");
  const resLevel = resBox.querySelector(".risk-calc-level");
  const resDesc = resBox.querySelector(".risk-calc-desc");

  function updateRiskCalculator() {
    const L = parseInt(inputL.value);
    const C = parseInt(inputC.value);
    const R = L * C;
    const level = getRiskLevel(R);
     
    resBox.setAttribute("data-level", level);
    resScore.textContent = R;
     
    if (currentLang === 'id') {
      resLevel.textContent = level === "high" ? "High / Critical" : level === "med" ? "Medium" : "Low";
      resDesc.textContent = level === "high" ? "Perlu tinjauan mendalam, stop work jika perlu." : 
                            level === "med" ? "Perlu kontrol tambahan." : "Dapat diterima dengan monitoring.";
    } else {
      resLevel.textContent = level === "high" ? "High / Critical" : level === "med" ? "Medium" : "Low";
      resDesc.textContent = level === "high" ? "Needs deep review, stop work if necessary." : 
                            level === "med" ? "Needs additional controls." : "Acceptable with monitoring.";
    }
  }

  // Event Listeners for Calculator
  btnCalc.addEventListener("click", updateRiskCalculator);
  inputL.addEventListener("change", updateRiskCalculator);
  inputC.addEventListener("change", updateRiskCalculator);

  // 7. Sidenav Toggle for Mobile
  const sidenavHeaderGroup = document.getElementById("sidenavHeaderGroup");
  const sidenavMobile = document.getElementById("sidenavMobile");
   
  if (sidenavHeaderGroup && sidenavMobile) {
    sidenavHeaderGroup.addEventListener("click", () => {
      // Only toggle if on mobile width
      if (window.innerWidth <= 880) {
        sidenavMobile.classList.toggle("open");
      }
    });
  }

  // FIXED: Updated scroll logic to handle default anchor behavior
  document.querySelectorAll(".nav-link, .nav-sublink").forEach(link => {
    link.addEventListener("click", (e) => {
      // Prevent default anchor jump to allow smooth scroll logic
      e.preventDefault(); 
      const target = document.getElementById(link.getAttribute("data-target"));
      if(target) {
        // Updated offset logic
        const offset = target.getBoundingClientRect().top + window.scrollY - 20;
        window.scrollTo({top: offset, behavior: 'smooth'});
        
        if(link.classList.contains('nav-link')) {
           document.querySelectorAll('.nav-link').forEach(l=>l.classList.remove('active'));
           link.classList.add('active');
        }
        // Auto close sidenav on mobile after click
        if (window.innerWidth <= 880) {
           sidenavMobile.classList.remove("open");
        }
      }
    });
  });

  // Init
  (function init() {
    // Theme
    let stored = localStorage.getItem("hra-theme");
    if (!stored) stored = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
    applyTheme(stored);
     
    // Set default language to English and render content
    setLanguage('en');
     
    // PERFORMANCE FIX 3: Wrapped accordion init in requestAnimationFrame (Fixes Forced Reflow)
    requestAnimationFrame(() => {
        const firstAcc = document.querySelector(".acc-item");
        if(firstAcc) {
           firstAcc.querySelector(".acc-body").style.maxHeight = firstAcc.querySelector(".acc-body").scrollHeight + "px";
        }
    });
  })();

</script>
</body>
</html>
